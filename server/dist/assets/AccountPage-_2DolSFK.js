import{r as o,j as e,c as k,R as A}from"./client-CYooLA_G.js";import{O as T}from"./OFS Logo-D2InKytt.js";const L="/assets/ProfilePic-CypwZ1Uw.jpg",V=()=>{const[g,p]=o.useState(!1),[c,r]=o.useState(null),[x,v]=o.useState("User"),[N,S]=o.useState("Email"),[b,B]=o.useState([]),[s,O]=o.useState([[],[],[]]);o.useState([]);const u=t=>{p(!0),r(t)},E=()=>{c===1?h(c,document.getElementById("street1").value,document.getElementById("city1").value,document.getElementById("state1").value,document.getElementById("zip1").value):c===2?h(c,document.getElementById("street2").value,document.getElementById("city2").value,document.getElementById("state2").value,document.getElementById("zip2").value):c===3&&h(c,document.getElementById("street3").value,document.getElementById("city3").value,document.getElementById("state3").value,document.getElementById("zip3").value),p(!1),r(null)};window.addEventListener("load",()=>{const t=localStorage.getItem("selectedLocation");if(t){const n=document.querySelector(`.${t}`),i=n.querySelector(".selectBtn");n&&(n.style.border="3px solid #ccc",n.style.borderRadius="10px",i.style.display="none")}});function m(t,n,i){C(i),console.log("Selected button clicked, location selected.");const l=document.getElementsByClassName(t);document.querySelectorAll(".locationBtns").forEach(f=>{f.parentNode.style.border="none",f.querySelector(".selectBtn").style.display="block"});for(var a=0;a<l.length;a++)console.log(l[a]),l[a].style.border="3px solid #ccc",l[a].style.borderRadius="10px";const d=n.target.closest(".locationBtns").parentNode;d.style.border="3px solid #ccc",d.style.borderRadius="10px",d.querySelector(".selectBtn").style.display="none",localStorage.setItem("selectedLocation",t)}const I=()=>{const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify()};fetch("/users/getUserInfo",t).then(n=>{if(n.status==200)return n.json();window.location.href="/login/"}).then(n=>{v(n.user),S(n.email)})},j=async(t,n)=>{const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})};return fetch("/users/location/getAll",i).then(l=>l.status===200?l.json():(console.log("Error retrieving data from backend server!"),null)).then(l=>{r(l.id),O(l),console.log(l)})},C=t=>{const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buttonNumber:t})};fetch("/users/location/setSelected",n).then(i=>{i.status==200}).then(i=>{})},h=(t,n,i,l,y)=>{const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buttonNumber:t,street:n,city:i,state:l,zip:y})};fetch("/users/location/set",a).then(d=>{d.status==200}).then(d=>{j()})},z=()=>{const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify()};fetch("/users/signout",t).then(n=>{n.status==200?window.location.href="/MainPage/":alert("Looks like you are trying to signout without being logged in?")})},P=async(t,n)=>{const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})};return fetch("/users/orders/getAll",i).then(l=>l.status===200?l.json():(console.log("Error retrieving data from backend server!"),null)).then(l=>{B(l),console.log(l)})};return o.useEffect(()=>{P(),I(),j()},[]),e.jsxs("div",{className:"page-div",children:[e.jsxs("a",{href:"/MainPage/",children:[" ",e.jsx("img",{src:T,alt:"",id:"logoIcon"})]}),e.jsxs("div",{className:"parentContainer",children:[e.jsxs("div",{className:"myProfile",children:[e.jsxs("header",{children:[e.jsx("img",{src:L,alt:"Default profile picture image"}),e.jsx("h1",{id:"user",children:x})]}),e.jsxs("form",{action:"",method:"POST",children:[e.jsxs("div",{id:"secondInput",children:[e.jsx("input",{type:"text",id:"usernameInput",placeholder:x}),e.jsx("br",{})]}),e.jsxs("div",{id:"secondInput",children:[e.jsx("input",{type:"text",id:"emailInput",placeholder:N}),e.jsx("br",{}),e.jsx("input",{type:"submit",id:"save",value:"Save"})]})]}),e.jsx("input",{type:"submit",id:"save",onClick:()=>{z()},value:"Sign Out"})]}),e.jsxs("div",{className:"otherSettings",children:[e.jsxs("div",{className:"locations",children:[e.jsx("header",{children:e.jsx("h1",{children:"Location"})}),e.jsxs("div",{className:"cards",children:[e.jsxs("div",{className:"location-one",children:[e.jsxs("div",{className:"location-info",children:[e.jsx("p",{children:"Address 1:"}),e.jsx("p",{children:s[0].street}),e.jsxs("p",{children:[s[0].city,", ",s[0].stte]}),e.jsx("p",{children:s[0].zipc})]}),e.jsxs("div",{className:"locationBtns",children:[e.jsx("button",{className:"selectBtn",onClick:t=>{m("location-one",t,1)},children:"Select"}),e.jsx("button",{onClick:()=>{u(1)},className:"editBtn",children:"Edit"})]}),g&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-body",children:[c===1&&e.jsxs("form",{className:"location-form",children:[e.jsx("input",{type:"text",name:"street",id:"street1",defaultValue:s[0].street}),e.jsx("input",{type:"text",name:"city",id:"city1",defaultValue:s[0].city}),e.jsx("input",{type:"text",name:"state",id:"state1",defaultValue:s[0].stte}),e.jsx("input",{type:"text",name:"zip",id:"zip1",defaultValue:s[0].zipc})]}),c===2&&e.jsxs("form",{className:"location-form",children:[e.jsx("input",{type:"text",name:"street",id:"street2",defaultValue:s[1].street}),e.jsx("input",{type:"text",name:"city",id:"city2",defaultValue:s[1].city}),e.jsx("input",{type:"text",name:"state",id:"state2",defaultValue:s[1].stte}),e.jsx("input",{type:"text",name:"zip",id:"zip2",defaultValue:s[1].zipc})]}),c===3&&e.jsxs("form",{className:"location-form",children:[e.jsx("input",{type:"text",name:"street",id:"street3",defaultValue:s[2].street}),e.jsx("input",{type:"text",name:"city",id:"city3",defaultValue:s[2].city}),e.jsx("input",{type:"text",name:"state",id:"state3",defaultValue:s[2].stte}),e.jsx("input",{type:"text",name:"zip",id:"zip3",defaultValue:s[2].zipc})]})]}),e.jsx("button",{className:"save-location-btn",onClick:()=>{E()},children:"Save"})]})})]}),e.jsxs("div",{className:"location-two",children:[e.jsxs("div",{className:"location-info",children:[e.jsx("p",{children:"Address 2:"}),e.jsx("p",{children:s[1].street}),e.jsxs("p",{children:[s[1].city,", ",s[1].stte]}),e.jsx("p",{children:s[1].zipc})]}),e.jsxs("div",{className:"locationBtns",children:[e.jsx("button",{className:"selectBtn",onClick:t=>{m("location-two",t,2)},children:"Select"}),e.jsx("button",{onClick:()=>{u(2)},className:"editBtn",children:"Edit"})]})]}),e.jsxs("div",{className:"location-three",children:[e.jsxs("div",{className:"location-info",children:[e.jsx("p",{children:"Address 3:"}),e.jsx("p",{children:s[2].street}),e.jsxs("p",{children:[s[2].city,", ",s[2].stte]}),e.jsx("p",{children:s[2].zipc})]}),e.jsxs("div",{className:"locationBtns",children:[e.jsx("button",{className:"selectBtn",onClick:t=>{m("location-three",t,3)},children:"Select"}),e.jsx("button",{onClick:()=>{u(3)},className:"editBtn",children:"Edit"})]})]})]})]}),e.jsxs("div",{className:"orderHistory",children:[e.jsx("header",{children:e.jsx("h1",{children:"Order History"})}),e.jsx("div",{className:"orders",children:e.jsxs("table",{id:"cart-items",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order Number"}),e.jsx("th",{children:"Order Location"}),e.jsx("th",{children:"Total Price"}),e.jsx("th",{children:"Item Count"}),e.jsx("th",{children:"Date"})]})}),e.jsx("tbody",{children:b.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.orderNum}),e.jsx("td",{children:t.street+", "+t.city+", "+t.state+" "+t.zip}),e.jsxs("td",{children:["$",t.totalPrice]}),e.jsxs("td",{children:["#",t.totalCount]}),e.jsx("td",{children:t.date})]},t.name))})]})})]})]})]})]})};k.createRoot(document.getElementById("root")).render(e.jsx(A.StrictMode,{children:e.jsx(V,{})}));
